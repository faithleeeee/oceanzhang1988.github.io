<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Publishing via the API" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="For the last week publishing in the Siteleaf interface has been powered by our API. This has been a requested feature by some of our users and ourselves. Its behavior is bit different than some of our other API endpoints, so let’s go over it. To initiate a publish, make an authenticated POST request to the /sites/:id/publish endpoint. $ curl -u &quot;$API_KEY:$API_SECRET&quot; -X POST \ https://api.siteleaf.com/v1/sites/$SITE_ID/publish {&quot;job_id&quot;:&quot;e79af12c79ccd8866902d3dd&quot;} This triggers a publish and immediately returns a job ID (or returns an already running job ID if one exists). You can stop here if you’d like and Siteleaf will happily chug away in the background. But the fun doesn’t stop there. You can optionally check in on publish progress using your job_id from above by making an authenticated GET request to the new /jobs/:id endpoint." />
<meta property="og:description" content="For the last week publishing in the Siteleaf interface has been powered by our API. This has been a requested feature by some of our users and ourselves. Its behavior is bit different than some of our other API endpoints, so let’s go over it. To initiate a publish, make an authenticated POST request to the /sites/:id/publish endpoint. $ curl -u &quot;$API_KEY:$API_SECRET&quot; -X POST \ https://api.siteleaf.com/v1/sites/$SITE_ID/publish {&quot;job_id&quot;:&quot;e79af12c79ccd8866902d3dd&quot;} This triggers a publish and immediately returns a job ID (or returns an already running job ID if one exists). You can stop here if you’d like and Siteleaf will happily chug away in the background. But the fun doesn’t stop there. You can optionally check in on publish progress using your job_id from above by making an authenticated GET request to the new /jobs/:id endpoint." />
<link rel="canonical" href="https://www.google.com/blog/publishing-via-the-api/" />
<meta property="og:url" content="https://www.google.com/blog/publishing-via-the-api/" />
<meta property="og:site_name" content="Treasure" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-06-24T11:10:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Publishing via the API" />
<meta name="twitter:site" content="@siteleaf" />
<script type="application/ld+json">
{"url":"https://www.google.com/blog/publishing-via-the-api/","@type":"BlogPosting","headline":"Publishing via the API","dateModified":"2015-06-24T11:10:00-04:00","datePublished":"2015-06-24T11:10:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.google.com/blog/publishing-via-the-api/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.google.com/assets/logo.svg"}},"description":"For the last week publishing in the Siteleaf interface has been powered by our API. This has been a requested feature by some of our users and ourselves. Its behavior is bit different than some of our other API endpoints, so let’s go over it. To initiate a publish, make an authenticated POST request to the /sites/:id/publish endpoint. $ curl -u &quot;$API_KEY:$API_SECRET&quot; -X POST \\ https://api.siteleaf.com/v1/sites/$SITE_ID/publish {&quot;job_id&quot;:&quot;e79af12c79ccd8866902d3dd&quot;} This triggers a publish and immediately returns a job ID (or returns an already running job ID if one exists). You can stop here if you’d like and Siteleaf will happily chug away in the background. But the fun doesn’t stop there. You can optionally check in on publish progress using your job_id from above by making an authenticated GET request to the new /jobs/:id endpoint.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="twitter:image" content="https://www.google.com/assets/avatar.png"/>
    <title>Publishing via the API - Siteleaf</title>
    
    <link rel="stylesheet" href="/styles/all.css" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Siteleaf: Blog (RSS)" href="https://www.google.com/feed.xml" />
    <link rel="alternate" type="application/json" title="Siteleaf: Blog (JSON)" href="https://www.google.com/feed.json" />
  </head>
  <body class="post">
    <div class="wrap">
      

  <!-- blog permalink, inherit from first tag -->
  
  

<div class="headerWrap bg--green">
  <header class="header">
    <ul class="header__items">
      
      <li class="header__item">
        <a href="/blog/" class="header__link">Blog</a>
      </li>
      
      <li class="header__item">
        <a href="/gallery/" class="header__link">Gallery</a>
      </li>
      
      <li class="header__item">
        <a href="/plans/" class="header__link">Plans</a>
      </li>
      
      <li class="header__item">
        <a href="https://google.com" class="header__link">Learn</a>
      </li>
      
      <li class="header__item">
        <a href="https://google.com" class="header__link">Log in</a>
      </li>
      
      <li class="header__item">
        <a href="https://manage.siteleaf.com/signup" class="header__link header__link--button">Sign up</a>
      </li>
      <li class="header__item header__item--mobile">
        <a id="mobileNavOpen" class="header__link">Menu</a>
      </li>
    </ul>
    <a href="/" class="header__home"><img src="/assets/logo.svg" class="header__logo" alt="Treasure" /></a>
    <h1 class="header__title">Publishing via the API</h1>
    
    
  </header>
  <nav class="mobileNav">
    <header class="header">
      <ul class="header__items">
        <li class="header__item header__item--mobile">
          <a id="mobileNavClose" class="header__link">Close</a>
        </li>
      </ul>
      <ul class="mobileNav__items">
        
        <li class="mobileNav__item">
          <a href="/blog/" class="mobileNav__link">Blog</a>
        </li>
        
        <li class="mobileNav__item">
          <a href="/gallery/" class="mobileNav__link">Gallery</a>
        </li>
        
        <li class="mobileNav__item">
          <a href="/plans/" class="mobileNav__link">Plans</a>
        </li>
        
        <li class="mobileNav__item">
          <a href="https://google.com" class="mobileNav__link">Learn</a>
        </li>
        
        <li class="mobileNav__item">
          <a href="https://google.com" class="mobileNav__link">Log in</a>
        </li>
        
        <li class="mobileNav__item">
          <a href="https://manage.siteleaf.com/signup" class="mobileNav__link">Sign up</a>
        </li>
      </ul>
    </header>
  </nav>
</div>

      

<article class="article">
  
  
  <section class="article__meta">
    
      <ul class="article__tags">
        
          
          
            
            
              <li class="article__tag"><a href="/blog/tags/announcement/" class="article__tag__link bg--green">Announcement</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
          
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              <li class="article__tag"><a href="/blog/tags/tutorial/" class="article__tag__link bg--blue">Tutorial</a></li>
            
          
            
            
          
            
            
          
        
          
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              <li class="article__tag"><a href="/blog/tags/v1/" class="article__tag__link bg--dark-gray">v1</a></li>
            
          
            
            
          
        
      </ul>
    
    
    <time class="article__date" datetime="2015-06-24T11:10:00-04:00">Jun 24, 2015</time>
    
  </section>
  
  <section class="article__content">
    
      <p class="note">This post refers to a legacy version of Siteleaf.</p>
    

    

    
      <p>For the last week publishing in the Siteleaf interface has been powered by our API. This has been a requested feature by some of our users and ourselves. Its behavior is bit different than some of our other API endpoints, so let’s go over it.</p>

<p>To initiate a publish, make an authenticated <code class="language-plaintext highlighter-rouge">POST</code> request to the <code class="language-plaintext highlighter-rouge">/sites/:id/publish</code> endpoint.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$API_KEY</span><span class="s2">:</span><span class="nv">$API_SECRET</span><span class="s2">"</span> <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.siteleaf.com/v1/sites/<span class="nv">$SITE_ID</span>/publish

<span class="o">{</span><span class="s2">"job_id"</span>:<span class="s2">"e79af12c79ccd8866902d3dd"</span><span class="o">}</span> 
</code></pre></div></div>

<p>This triggers a publish and immediately returns a job ID (or returns an already running job ID if one exists). You can stop here if you’d like and Siteleaf will happily chug away in the background.</p>

<p>But the fun doesn’t stop there. You can optionally check in on publish progress using your <code class="language-plaintext highlighter-rouge">job_id</code> from above by making an authenticated <code class="language-plaintext highlighter-rouge">GET</code> request to the new <code class="language-plaintext highlighter-rouge">/jobs/:id</code> endpoint.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$API_KEY</span><span class="s2">:</span><span class="nv">$API_SECRET</span><span class="s2">"</span> <span class="se">\</span>
  https://api.siteleaf.com/api/v1/jobs/e79af12c79ccd8866902d3dd

event:publish
data:<span class="o">{</span><span class="s2">"status"</span>:<span class="s2">"working"</span>,<span class="s2">"message"</span>:<span class="s2">"Checking... /home"</span>,<span class="s2">"updated_at"</span>:<span class="s2">"1435159120"</span><span class="o">}</span>

<span class="o">[</span>etc…]

event:publish
data:<span class="o">{</span><span class="s2">"status"</span>:<span class="s2">"complete"</span>,<span class="s2">"message"</span>:<span class="s2">"Published"</span>,<span class="s2">"updated_at"</span>:<span class="s2">"1435159121"</span><span class="o">}</span>
</code></pre></div></div>

<p>This endpoint, unlike our others, consistently returns <a href="https://en.wikipedia.org/wiki/Server-sent_events">Server Sent Events</a> (SSE) instead of JSON documents (including  errors). The <code class="language-plaintext highlighter-rouge">data</code> field is JSON encoded however. SSE is supported in all modern browsers and there are client libraries in a number of programming languages.</p>

<p>Additionally, job ID’s are kept for at least 30 minutes after completion so you can check in on a publish immediately or wait a bit.</p>

<p>Can’t wait to see what uses you come up with!</p>

<h3 id="publishing-from-the-gem">Publishing from the gem</h3>

<p>First install the latest gem (<a href="https://rubygems.org/gems/siteleaf"><code class="language-plaintext highlighter-rouge">0.9.23</code></a> as of writing)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gem <span class="nb">install </span>siteleaf
</code></pre></div></div>

<p>And then…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>siteleaf publish
Fetching inventory...
Compiling...
<span class="o">[</span>etc…]
Published
<span class="o">=&gt;</span> Publish completed.
</code></pre></div></div>

<p>Or if you don’t care about progress, you can use either of the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>siteleaf publish <span class="nt">-q</span>
<span class="nv">$ </span>siteleaf publish <span class="nt">--quiet</span>

<span class="o">=&gt;</span> Publish queued.
</code></pre></div></div>

<p>🎉🎉</p>

    
    
  </section>
</article>



    </div>
    <div class="footerWrap">
  <footer class="footer">
    <ul class="footer__items">
      
      <li class="footer__item">
        <a href="/features/" class="footer__link">Features</a>
      </li>
      
      <li class="footer__item">
        <a href="https://google.com" class="footer__link">Press</a>
      </li>
      
      <li class="footer__item">
        <a href="/privacy/" class="footer__link">Privacy</a>
      </li>
      
      <li class="footer__item">
        <a href="/terms/" class="footer__link">Terms</a>
      </li>
      
      <li class="footer__item">
        <a href="/gdpr/" class="footer__link">GDPR</a>
      </li>
      
      <li class="footer__item">
        <a href="https://google.com" class="footer__link">Status</a>
      </li>
      
      <li class="footer__item">
        <a href="https://google.com" class="footer__link">Community</a>
      </li>
      
      <li class="footer__item">
        <a href="https://twitter.com/" class="footer__link">Twitter</a>
      </li>
      
    </ul>
    <span class="footer__madeBy"><a href="https://github.com/siteleaf/siteleaf.com">Made in Siteleaf</a> by <a href="https://oak.is/">Oak</a></span>
  </footer>
</div>

    
    <script src="/scripts/all.js"></script>
    <script type="text/javascript">!function(e,t,n){function a(){var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://beacon-v2.helpscout.net",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],"complete"===t.readyState)return a();e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}(window,document,window.Beacon||function(){});</script><script>window.Beacon('init', '13d71c30-bf3c-49d8-a515-60646ded4459')</script>

<script async src='https://r.wdfl.co/rw.js' data-rewardful='6def54'></script>

<script type="text/javascript">
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://a.siteleaf.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '5']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
  </body>
</html>
